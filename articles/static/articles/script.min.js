if(typeof is_base_public_template!=='undefined'&&is_base_public_template==!0){var html='';var element=document.getElementById('user-info');var cookieValue=document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1");var profile_image=document.cookie.replace(/(?:(?:^|.*;\s*)profile_image\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(profile_image!='None')profile_image=profile_image.substring(1,profile_image.length-1);if(cookieValue){html=`
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown"  href="/login/">
                    ${profile_image != 'None' ? '<img src="' + profile_image + '" class="navbar-profile-image">' : '<span class="glyphicon glyphicon-user"></span>'}
                    &nbsp; ${ cookieValue } <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="/profile/@${ cookieValue }/"><span class="glyphicon glyphicon-eye-open"></span>&nbsp;&nbsp;My profile</a></li>
                    <li><a href="/profile/edit/"><span class="glyphicon glyphicon-pencil"></span>&nbsp;&nbsp;Edit profile</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="/articles/drafts/"><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;My drafts</a></li>
                    <li><a href="/articles/published/"><span class="glyphicon glyphicon-list"></span>&nbsp;&nbsp;My publications</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="/logout/"><span class="glyphicon glyphicon-log-out"></span>&nbsp;&nbsp;Logout</a></li>
                </ul>
            </li>
        `}
else{html=`
            <li><a id="login-btn" class="btn btn-success navbar-btn" href="/login/">Log in</a></li>
            <li><a class="text-center" href="/register/"><span class="glyphicon glyphicon-edit" ></span> &nbsp;Register </a></li>
        `}
element.innerHTML=html}
var register_aux=!0;var register_times=6;function blinkRegister(){element=document.getElementById("different_passwords_error");if(register_times>0){if(register_aux==!0){element.style.color='#f5f5f5';register_aux=!1;setTimeout(blinkRegister,100)}
else{element.style.color='#a94442';register_aux=!0;setTimeout(blinkRegister,400)}
register_times--}
else{register_times=6}}
if(typeof is_register_template!=='undefined'){$(document).ready(function(){var $form=$('form');$form.submit(function(){if(document.getElementById('password1').value!=document.getElementById('password2').value){document.getElementById('different_passwords_error').style.display='block';blinkRegister();document.getElementById('password2').value='';document.getElementById('password2').focus();return!1}})})}
function checkChanges(){if(document.getElementById('resume_content').value!=resume)
document.getElementById('save_profile_button').disabled=!1;else document.getElementById('save_profile_button').disabled=!0}
if(typeof is_edit_profile_template!=='undefined'){}
function read_article_url(id){return'/articles/'+id+'/'}
function edit_article_url(id){return'/articles/edit/'+id+'/'}
function publish_article_url(id){return'/articles/publish/'+id+'/'}
function delete_article_url(id){return'/articles/delete/'+id+'/'}
function json_draft_articles_url(){return'/articles/drafts/json/'}
function json_published_articles_url(){return'/articles/published/json/'}
var own_articles_already_loaded=!1;function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}
return cookieValue}
function publishArticle(id){$.post(publish_article_url(id),{'csrfmiddlewaretoken':getCookie('csrftoken')},function(data,status){var number_of_published_badge=document.getElementById("number_of_published");number_of_published_badge.innerHTML=parseInt(number_of_published_badge.innerHTML)+1;var number_of_drafts_badge=document.getElementById("number_of_drafts");number_of_drafts_badge.innerHTML=parseInt(number_of_drafts_badge.innerHTML)-1})}
function deleteArticle(id,draft){$.post(delete_article_url(id),{'csrfmiddlewaretoken':getCookie('csrftoken')},function(data,status){article_box=document.getElementById("article_box_"+id);article_box.parentElement.removeChild(article_box);var number_of_articles_badge=document.getElementById(draft?"number_of_drafts":"number_of_published");number_of_articles_badge.innerHTML=parseInt(number_of_articles_badge.innerHTML)-1})}
function loadArticles(element,drafts=!1,published=!1){if(element.parentElement.className!='active'){if(drafts)history.pushState(null,'published_articles','/articles/published/');else history.pushState(null,'draft_articles','/articles/drafts/');if(!own_articles_already_loaded){if(drafts)url=json_published_articles_url();else url=json_draft_articles_url();$.get(url,function(data,status){own_articles_already_loaded=!0;if(drafts)document.getElementById("published_articles_loader").style.display='none';else document.getElementById("draft_articles_loader").style.display='none';if(data!=null){var user=data.author;var html='';data.articles.forEach(article=>{if(user.profileImagePath)user_image_html='<img src="'+user.profileImagePath+'" class="pull-left" height="68"></img>';else user_image_html='<span class="glyphicon glyphicon-user pull-left"></span>';var article_image_url=(article.image_path!=""?('http://p7g5g3g9.hostrycdn.com/'+article.image_path):"https://www.freeiconspng.com/uploads/no-image-icon-6.png")
html+=`
                            <div class="col-md-6" id="article_box_${ article.id }">
                                <div class="article-box">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="article-box-image" style="background-image: url('${article_image_url}');">
                                                <div class="article-box-controls-container">
                                                    <p class="article-box-controls">
                                                        <span class="glyphicon glyphicon-trash delete-action-icon" title="Delete" data-toggle="modal" data-target="#delete_article_modal_${ article.id }"></span>
                                                        ${published ? '<span class="glyphicon glyphicon-share publish-action-icon" title="Publish" onclick="publishArticle(' + article.id + ');"></span>' : ''}
                                                        ${published ? '<a href="' + edit_article_url(article.id) + '"><span class="glyphicon glyphicon-pencil edit-action-icon" title="Edit"></span></a>' 
                                                        : '<a href="' + read_article_url(article.id) + '"><span class="glyphicon glyphicon-eye-open edit-action-icon" title="Read"></span></a>'}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6" ${published ? 'onclick="window.location.href = \'' + edit_article_url(article.id) + '\'\"' : ''}>
                                            <div class="article-box-content">
                                                <div class="article-box-title">
                                                    <h3>${ article.title }</h3>
                                                    <p class="ellipsed">${ article.description }</p>
                                                </div>
                                                <div class="article-author">
                                                    ${user_image_html}
                                                    <h4><a href="/profile/@${ article.author }/">${ article.author }</a></h4>
                                                    <!--<p>${ user.resume }</p>-->
                                                    <p>
                                                        <span class="glyphicon glyphicon-calendar"></span>&nbsp;
                                                        ${ article.last_modified_date.split('T')[0] }</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="delete_article_modal_${ article.id }" class="modal fade" role="dialog">
                                <div class="modal-dialog">
                                    <form class="deleteForm" method="POST" action="/articles/delete/${ article.id }">
                                        ${ csrftok }
                                        <!-- Modal content-->
                                        <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title text-danger"><span class="glyphicon glyphicon-trash"></span> &nbsp;Delete draft</h3>
                                        </div>
                                        <div class="modal-body">
                                            <h4>Do you really wish to delete the selected article?</h4>
                                            <h4 class="text-danger"><span class="glyphicon glyphicon-warning-sign"></span> &nbsp;The draft <span class="label label-danger">${ article.title }</span> will be permanently deleted!</h4>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-danger" data-dismiss="modal" onclick="deleteArticle(${ article.id }, draft=${drafts ? 'false' : 'true'})">Delete</a>
                                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                        </div>
                                        </div>
                                    </form>                                                
                                </div>
                            </div>
                        `});if(drafts)document.getElementById("published_articles_content").innerHTML=html;else document.getElementById("draft_articles_content").innerHTML=html}})}}}
function getTags(){var select=document.getElementById('select1');var result=[];var options=select&&select.options;var opt;for(var i=0,iLen=options.length;i<iLen;i++){opt=options[i];if(opt.selected){result.push(opt.value||opt.text)}}
var custom_tags=document.getElementById("selected_tags");var children=custom_tags.children;for(var i=0;i<children.length;i++){result.push(children[i].innerHTML)}
document.getElementById('tags').value=result;alert(result)}
function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}
return cookieValue}
function save_article_url(id){return'/articles/save/'+id+'/'}
function saveArticle(id){var content='';var texties=document.getElementById("columns").getElementsByTagName("*");var i;for(i=0;i<texties.length;i++){if(texties[i].innerHTML!=''){var tagName=texties[i].tagName;content+='<'+tagName+' contenteditable="true" draggable="true">'+texties[i].innerHTML+'</'+tagName+'>'}}
content=document.getElementById("columns").innerHTML;$.post(save_article_url(id),{'csrfmiddlewaretoken':getCookie('csrftoken'),'content':content},function(data,status){if(data.success==!0)
alert('Article saved!');else alert('Some error has occurred!')})}
var edit_article_dragSrcEl=null;var edit_article_counter=0;function addElement(srcElement){var new_element;if(srcElement==null){new_element=document.createElement("p");new_element.contentEditable="true";document.getElementById("columns").appendChild(new_element);window.scrollTo(0,document.body.scrollHeight)}
else{if(srcElement.tagName=='P'||srcElement.tagName=='H2'||srcElement.tagName=='UL'){new_element=document.createElement("p")}
else{new_element=document.createElement("li")}
new_element.contentEditable="true";srcElement.parentNode.insertBefore(new_element,srcElement.nextSibling)}
new_element.focus()}
function addList(srcElement){var new_element=document.createElement("ul");var new_list_element=document.createElement("li");new_list_element.contentEditable="true";if(srcElement==null){document.getElementById("columns").appendChild(new_element);new_element.appendChild(new_list_element);window.scrollTo(0,document.body.scrollHeight)}
else{srcElement.parentNode.insertBefore(new_element,srcElement.nextSibling);new_element.appendChild(new_list_element)}
new_list_element.focus()}
function addTitle(srcElement){var new_element=document.createElement("h2");new_element.contentEditable="true";new_element.style.minHeight="3rem";if(srcElement==null){document.getElementById("columns").appendChild(new_element);window.scrollTo(0,document.body.scrollHeight)}
else srcElement.parentNode.insertBefore(new_element,srcElement.nextSibling);new_element.focus()}
function addImage(imageSrc){var new_image=document.createElement("img");var IMAGE_PREFIX='http://p7g5g3g9.hostrycdn.com/';new_image.src=IMAGE_PREFIX+imageSrc;new_image.contentEditable='true';var new_image_caption=document.createElement("p");new_image_caption.contentEditable='true';new_image_caption.innerHTML='Image caption';new_image_caption.className='image-caption';document.getElementById("columns").appendChild(new_image);document.getElementById("columns").appendChild(new_image_caption);window.scrollTo(0,document.body.scrollHeight);new_image_caption.focus()}
var edit_article_map={};if(typeof is_edit_article_template!=='undefined'){document.onkeydown=function(e){if(event.srcElement.tagName!='SELECT'&&event.srcElement.tagName!='OPTION'&&event.srcElement.tagName!='INPUT'){if(event.srcElement!=document.body&&(event.which==13||event.keyCode==13||event.which==46||event.keyCode==46||event.which==8||event.keyCode==8||event.which==38||event.keyCode==38||event.which==40||event.keyCode==40)){if(event.which==13||event.keyCode==13){event.preventDefault();if(e.srcElement.innerHTML==''){if(e.srcElement.tagName=='P')addTitle(e.srcElement);else addElement(e.srcElement.parentNode);e.srcElement.parentNode.removeChild(e.srcElement)}
else addElement(e.srcElement)}
else if(event.which==46||event.keyCode==46){if(event.srcElement.innerHTML==''){event.preventDefault();var nextSibling=event.srcElement.nextSibling;event.srcElement.parentElement.removeChild(event.srcElement);nextSibling.focus()}}
else if(event.which==8||event.keyCode==8){if(event.srcElement.innerHTML==''){event.preventDefault();var previousSibling=event.srcElement.previousSibling;event.srcElement.parentElement.removeChild(event.srcElement);var range=document.createRange();var sel=window.getSelection();var position=previousSibling.innerHTML.length;if(position!=0){range.setStart(previousSibling.childNodes[0],position);range.collapse(!0);sel.removeAllRanges();sel.addRange(range)}
previousSibling.focus()}}
else if(event.which==38||event.keyCode==38){event.preventDefault();var previousSibling=event.srcElement.previousSibling;var range=document.createRange();var sel=window.getSelection();var position=previousSibling.innerHTML.length;if(position!=0){range.setStart(previousSibling.childNodes[0],position);range.collapse(!0);sel.removeAllRanges();sel.addRange(range)}
previousSibling.focus()}
else if(event.which==40||event.keyCode==40){event.preventDefault();var nextSibling=event.srcElement.nextSibling;var range=document.createRange();var sel=window.getSelection();var position=nextSibling.innerHTML.length;if(position!=0){range.setStart(nextSibling.childNodes[0],position);range.collapse(!0);sel.removeAllRanges();sel.addRange(range)}
nextSibling.focus()}}}};document.getElementById("custom_tags").onkeypress=function(e){if(event.which==44||event.keyCode==44||event.which==13||event.keyCode==13||event.which==59||event.keyCode==59){event.preventDefault();var new_tag=document.createElement("span");new_tag.className="label label-info";new_tag.innerHTML=e.srcElement.value;new_tag.onclick=function(e){this.parentElement.removeChild(this)}
document.getElementById("selected_tags").appendChild(new_tag);e.srcElement.value=''}};$("#upload_image_form").submit(function(e){e.preventDefault();var formData=new FormData(this);$("#upload_image_modal").modal('hide');$.ajax({url:'/articles/uploads/images/',type:'POST',data:formData,success:function(data){if(data.success)alert("Your image has been successfully uploaded!");document.getElementById("upload_image_form").reset();addImage(data.imageSrc)},cache:!1,contentType:!1,processData:!1})});var cols=document.querySelectorAll('#columns p');[].forEach.call(cols,addDnDHandlers)}
function handleDragStart(e){edit_article_dragSrcEl=this;e.dataTransfer.effectAllowed='move';e.dataTransfer.setData('text/html',this.outerHTML);this.classList.add('dragElem')}
function handleDragOver(e){if(e.preventDefault){e.preventDefault()}
this.classList.add('over');e.dataTransfer.dropEffect='move';return!1}
function handleDragEnter(e){}
function handleDragLeave(e){this.classList.remove('over')}
function handleDrop(e){if(e.stopPropagation){e.stopPropagation()}
if(edit_article_dragSrcEl!=this){this.parentNode.removeChild(edit_article_dragSrcEl);var dropHTML=e.dataTransfer.getData('text/html');this.insertAdjacentHTML('beforebegin',dropHTML);var dropElem=this.previousSibling;addDnDHandlers(dropElem)}
else this.classList.remove('dragElem');this.classList.remove('over');return!1}
function handleDragEnd(e){this.classList.remove('over')}
function addDnDHandlers(elem){elem.addEventListener('dragstart',handleDragStart,!1);elem.addEventListener('dragenter',handleDragEnter,!1)
elem.addEventListener('dragover',handleDragOver,!1);elem.addEventListener('dragleave',handleDragLeave,!1);elem.addEventListener('drop',handleDrop,!1);elem.addEventListener('dragend',handleDragEnd,!1)}
function comments_url(id){return'/comments/'+id+'/'}
var comments_active_page=1;function loadComments(article_id,page){url="/comments/"+article_id+'/?page='+page;document.getElementById("comments_loader_text").innerHTML='Loading comments...';$.get(url,function(data,status){if(data!=null&&data.comments!=null&&data.comments.length>0){number_of_comments=data.comments.length;var html='';data.comments.forEach(comment=>{html+=`
                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 col-xs-offset-1 col-sm-offset-1 col-md-offset-1 col-lg-offset-1 well">
                    <span class="glyphicon glyphicon-user comment-glyph"></span>
                    <a href="/profile/@${ comment.author }/">${ comment.author }</a>
                    <p class="comment-content">${ comment.content }</p>
                    <span class="pull-right"><span class="glyphicon glyphicon-calendar"></span> ${ comment.date.split('T')[0] } , ${ comment.date.split('T')[1].split('.')[0] }</span>
                </div>
                `});document.getElementById("comments_container").innerHTML+=html;document.getElementById("comments_loader_text").innerHTML='Load more comments'}
else{document.getElementById("comments_loader_text").classList='';if(comments_active_page==2)document.getElementById("comments_loader_text").innerHTML='There are no comments';else document.getElementById("comments_loader_text").innerHTML='There are no more comments';document.getElementById("comments_loader").style.cursor='auto'}})}
var comment_aux=!0;var comment_times=2;function blinkComment(){element=document.getElementById("comments_container").firstElementChild;if(comment_times>0){if(comment_aux==!0){element.style.border='2px solid green';element.style.backgroundColor='lightgreen';comment_aux=!1;setTimeout(blinkComment,600)}
else{element.style.border='1px solid #e3e3e3';element.style.backgroundColor='#f5f5f5';comment_aux=!0;setTimeout(blinkComment,100)}
comment_times--}
else{comment_times=2}}
if(typeof is_read_article_template!=='undefined'){var html='';var element=document.getElementById('comment_form_content');var cookieValue=document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1");var profile_image=document.cookie.replace(/(?:(?:^|.*;\s*)profile_image\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(profile_image!='None')profile_image=profile_image.substring(1,profile_image.length-1);if(cookieValue){html=`
        ${profile_image != 'None' ? '<img src="' + profile_image + '" class="comment-profile-image">' : '<span class="glyphicon glyphicon-user comment-glyph"></span>'}
        <a href="/profile/@${ cookieValue }/">${ cookieValue }</a>
        <textarea id="comment_area" name="comment" rows="3" class="form-control"></textarea>
        <br>
        <div class="text-center">
            <input type="submit" class="btn btn-success" value="Submit comment"/>
        </div>
        `}
else{html=`
            <h4 class="text-center darkgreen">Please <a href="/login/">log in</a> before commenting</h4>
        `}
element.innerHTML=html;$.get("/csrf/",function(data){$("form").append(data)});$("#comment_form").submit(function(e){e.preventDefault();var formData=new FormData(this);$.ajax({url:comments_url(article_id),type:'POST',data:$("#comment_form").serialize(),success:function(data){if(data.success){var cookieValue=document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1");var profile_image=document.cookie.replace(/(?:(?:^|.*;\s*)profile_image\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(profile_image!='None')profile_image=profile_image.substring(1,profile_image.length-1);new_html=`
                            <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 col-xs-offset-1 col-sm-offset-1 col-md-offset-1 col-lg-offset-1 well">
                                ${profile_image != 'None' ? '<img src="' + profile_image + '" class="comment-profile-image">' : '<span class="glyphicon glyphicon-user comment-glyph"></span>'}
                                <a href="/profile/@${ cookieValue }/">${ cookieValue }</a>
                                <p class="comment-content">${ data.comment }</p>
                                <span class="pull-right"><span class="glyphicon glyphicon-calendar"></span> ${ data.date.split('T')[0] } , ${ data.date.split('T')[1].split('.')[0] }</span>
                            </div>
                        `;old_html=document.getElementById("comments_container").innerHTML;document.getElementById("comments_container").innerHTML=new_html+old_html;document.getElementById("comment_area").value='';blinkComment()}}})})}
if(typeof is_search_by_topic_template!=='undefined'){var active_topic=topic_key;var topics_active_page=[];topics_active_page.AI=1;topics_active_page.WP=1;topics_active_page.SE=1;topics_active_page.DS=1;topics_active_page.C=1;var topics_already_loaded=[];topics_already_loaded.AI=!1;topics_already_loaded.WP=!1;topics_already_loaded.SE=!1;topics_already_loaded.DS=!1;topics_already_loaded.C=!1;topics_already_loaded[topic_key]=!0;window.onscroll=function(ev){if((window.innerHeight+window.scrollY)>=document.body.offsetHeight-100){loadTopicArticles(active_topic,null)}}}
function read_article_url(id){return'/articles/'+id+'/'}
function topic_articles_url(topic){return'/topic/'+topic+'/'}
function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}
return cookieValue}
function loadTopicArticles(topic_id,topic_description){history.pushState(null,topic_id+'_articles','/topic/'+topic_id+'/');if(topic_description!=null)
document.getElementById("topic_description").innerHTML=topic_description;if(active_topic!=topic_id||topics_already_loaded[topic_id]){active_topic=topic_id;if(topic_description!=null&&topics_already_loaded[topic_id]==!0)return;else topics_already_loaded[topic_id]=!0;if(topic_description==null)
topics_active_page[topic_id]=topics_active_page[topic_id]+1;url='/topic/'+topic_id+'/json/'+topics_active_page[topic_id]+'/';$.get(url,function(data,status){if(document.getElementById(topic_id+"_loader")!=null)
document.getElementById(topic_id+"_loader").style.display='none';if(data.articles!=null){var user=data.author;var html='';data.articles.forEach(article=>{user_image_html='<span class="glyphicon glyphicon-user pull-left"></span>';var article_image_url=(article.image_path!=""?('http://p7g5g3g9.hostrycdn.com/'+article.image_path):"https://www.freeiconspng.com/uploads/no-image-icon-6.png")
html+=`
                        <div class="col-md-6" id="article_box_${ article.id }">
                            <div class="article-box">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="article-box-image" style="background-image: url('${article_image_url}');">
                                            <div class="article-box-controls-container">
                                                <p class="article-box-controls">
                                                    <a href="${ read_article_url(article.id) }"><span class="glyphicon glyphicon-eye-open edit-action-icon" title="Read"></span></a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6" onclick="window.location.href = '${ read_article_url(article.id) }'">
                                        <div class="article-box-content">
                                            <div class="article-box-title">
                                                <h3>${ article.title }</h3>
                                                <p class="ellipsed">${ article.description }</p>
                                            </div>
                                            <div class="article-author">
                                                ${user_image_html}
                                                <h4><a href="/profile/@${ article.author }/">${ article.author }</a></h4>
                                                <p>
                                                    <span class="glyphicon glyphicon-calendar"></span>&nbsp;
                                                    ${ article.last_modified_date.split('T')[0] }</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `});document.getElementById(topic_id+'_content').innerHTML+=html}})}}
function read_article_url(id){return'/articles/'+id+'/'}
function search_url(){return'/search/'}
function setTypeOfSearch(type){document.getElementById("search_box").name=type;document.getElementById("search_box").placeholder='Search '+type+'...';document.getElementById(type+"_picker").style.color='green';if(type=='articles')document.getElementById("people_picker").style.color='lightgreen';else if(type=='people')document.getElementById("articles_picker").style.color='lightgreen'}
var search_active_page=1;function loadSearchResults(page){$.ajax({url:search_url(),type:'GET',data:$("#search_form").serialize()+'&page='+page,success:function(data){console.log(data.articles);console.log(data.people);if(data.articles!=null&&data.articles.length>0){console.log('ARTICLES');var html='';data.articles.forEach(article=>{user_image_html='<span class="glyphicon glyphicon-user pull-left"></span>';var article_image_url=(article[5]!=""?('http://p7g5g3g9.hostrycdn.com/'+article[5]):"https://www.freeiconspng.com/uploads/no-image-icon-6.png")
html+=`
                        <div class="col-md-6" id="article_box_${ article[0] }">
                            <div class="article-box">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="article-box-image" style="background-image: url('${article_image_url}');">
                                            <div class="article-box-controls-container">
                                                <p class="article-box-controls">
                                                    <a href="${ read_article_url(article[0]) }"><span class="glyphicon glyphicon-eye-open edit-action-icon" title="Read"></span></a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6" onclick="window.location.href = '${ read_article_url(article[0]) }'">
                                        <div class="article-box-content">
                                            <div class="article-box-title">
                                                <h3>${ article[1] }</h3>
                                                <p class="ellipsed">${ article[2] }</p>
                                            </div>
                                            <div class="article-author">
                                                ${user_image_html}
                                                <h4><a href="/profile/@${ article[3] }/">${ article[3] }</a></h4>
                                                <p>
                                                    <span class="glyphicon glyphicon-calendar"></span>&nbsp;
                                                    ${ article[6].split('T')[0] }</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `});document.getElementById("error_message").innerHTML='';document.getElementById("search_people").innerHTML='';if(page==1)document.getElementById("search_articles").innerHTML=html;else document.getElementById("search_articles").innerHTML+=html}
else if(data.people!=null){console.log('PEOPLE');var html='';data.people.forEach(person=>{user_image_html=person.profileImagePath!=null?'<img class="pull-left profile-img" width="90" height="90" src="'+person.profileImagePath+'"></img>':'<span class="glyphicon glyphicon-user search-user-glyph pull-left"></span>';html+=`
                        <div class="user-search-box" onclick="window.location.href='/profile/@${person.username}/';">
                            ${ user_image_html }
                            <div>
                                <div class="search-user-info">
                                    <h2><a href="/profile/@${person.username}/">${person.first_name != "" ? person.first_name : person.username } ${person.first_name != "" ? person.last_name : "" }</a></h2>
                                    <h4>${person.resume != null ? person.resume : ""}</h4>
                                </div>
                            </div>
                        </div>
                        <hr>
                    `});document.getElementById("error_message").innerHTML='';document.getElementById("search_articles").innerHTML='';if(page==1)document.getElementById("search_people").innerHTML=html;else document.getElementById("search_people").innerHTML+=html}
else{console.log('ERROR');document.getElementById("search_articles").innerHTML='';document.getElementById("search_people").innerHTML='';document.getElementById("error_message").innerHTML="No results were found!"}}})}
if(typeof is_search_template!=='undefined'){$("#search_form").submit(function(e){search_active_page=1;e.preventDefault();var formData=new FormData(this);loadSearchResults(search_active_page++)});window.onscroll=function(ev){if((window.innerHeight+window.scrollY)>=document.body.offsetHeight-100){loadSearchResults(search_active_page++)}}}